import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";
export function RegenerateModal({ open, onClose, onConfirm, defaultDebateMode = false, defaultMaxRounds = 3, defaultStepReview = false, title = "Regenerate Response", subtitle = "Choose settings for this regeneration", confirmLabel = "Regenerate", headerIcon, confirmIcon, }) {
    const [debateMode, setDebateMode] = useState(defaultDebateMode);
    const [maxDebateRounds, setMaxDebateRounds] = useState(defaultMaxRounds);
    const [stepReview, setStepReview] = useState(defaultStepReview);
    const handleConfirm = () => {
        onConfirm(debateMode, maxDebateRounds, stepReview);
        onClose();
    };
    if (!open)
        return null;
    const defaultRegenerateIcon = (_jsx("svg", { viewBox: "0 0 24 24", className: "w-5 h-5 text-accent", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: _jsx("path", { d: "M4 12a8 8 0 0 1 8-8 8 8 0 0 1 6.18 2.82l2.82-2.82M20 4v6h-6M20 12a8 8 0 0 1-8 8 8 8 0 0 1-6.18-2.82l-2.82 2.82M4 20v-6h6" }) }));
    return (_jsx(AnimatePresence, { children: _jsx(motion.div, { className: "fixed inset-0 z-50 flex items-center justify-center bg-foreground/20 backdrop-blur-sm p-4", initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, onClick: onClose, children: _jsxs(motion.div, { className: "bg-background text-foreground rounded-2xl shadow-2xl max-w-md w-full border border-border", initial: { scale: 0.9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, exit: { scale: 0.9, opacity: 0 }, transition: { type: "spring", stiffness: 300, damping: 30 }, onClick: (e) => e.stopPropagation(), children: [_jsxs("div", { className: "flex items-center justify-between p-6 border-b border-border", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "w-10 h-10 rounded-full bg-accent/10 flex items-center justify-center", children: headerIcon ?? defaultRegenerateIcon }), _jsxs("div", { children: [_jsx("h2", { className: "text-lg font-semibold m-0", children: title }), _jsx("p", { className: "text-xs text-muted-foreground mt-0.5", children: subtitle })] })] }), _jsx("button", { type: "button", onClick: onClose, className: "rounded-lg w-8 h-8 border border-border flex items-center justify-center hover:bg-muted transition-colors text-lg", "aria-label": "Close", children: "\u00D7" })] }), _jsxs("div", { className: "p-6 space-y-5", children: [_jsx("div", { className: "rounded-lg border border-border p-4 bg-card", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "text-sm font-semibold m-0", children: "Enable Debate Mode" }), _jsx("p", { className: "text-xs text-muted-foreground mt-1", children: "Agents will debate until consensus or max rounds" })] }), _jsxs("label", { className: "relative inline-flex items-center cursor-pointer", children: [_jsx("input", { type: "checkbox", checked: debateMode, onChange: (e) => setDebateMode(e.target.checked), className: "sr-only peer" }), _jsx("div", { className: "w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-accent/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent" })] })] }) }), _jsx(AnimatePresence, { children: debateMode && (_jsx(motion.div, { initial: { opacity: 0, height: 0 }, animate: { opacity: 1, height: "auto" }, exit: { opacity: 0, height: 0 }, transition: { duration: 0.2 }, className: "rounded-lg border border-border p-4 bg-card overflow-hidden", children: _jsxs("label", { className: "block", children: [_jsxs("div", { className: "flex items-center justify-between mb-3", children: [_jsxs("div", { children: [_jsx("h4", { className: "text-sm font-semibold m-0", children: "Maximum Debate Rounds" }), _jsx("p", { className: "text-xs text-muted-foreground mt-1", children: "Limit debate iterations (1-10 rounds)" })] }), _jsx("span", { className: "text-lg font-bold text-accent", children: maxDebateRounds })] }), _jsx("input", { type: "range", min: "1", max: "10", value: maxDebateRounds, onChange: (e) => setMaxDebateRounds(Number(e.target.value)), className: "w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-accent" }), _jsxs("div", { className: "flex justify-between text-xs text-muted-foreground mt-2", children: [_jsx("span", { children: "1 round" }), _jsx("span", { children: "10 rounds" })] })] }) })) }), _jsx(AnimatePresence, { children: debateMode && (_jsx(motion.div, { initial: { opacity: 0, height: 0 }, animate: { opacity: 1, height: "auto" }, exit: { opacity: 0, height: 0 }, transition: { duration: 0.2 }, className: "rounded-lg border border-border p-4 bg-card overflow-hidden", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "text-sm font-semibold m-0", children: "Enable Step Review Mode" }), _jsx("p", { className: "text-xs text-muted-foreground mt-1", children: "Reveal debate rounds one at a time" })] }), _jsxs("label", { className: "relative inline-flex items-center cursor-pointer", children: [_jsx("input", { type: "checkbox", checked: stepReview, onChange: (e) => setStepReview(e.target.checked), className: "sr-only peer" }), _jsx("div", { className: "w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-accent/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent" })] })] }) })) }), _jsx("div", { className: "rounded-lg border border-accent/20 bg-accent/5 p-3", children: _jsx("p", { className: "text-xs text-muted-foreground m-0", children: debateMode
                                        ? `The panel will debate for up to ${maxDebateRounds} round${maxDebateRounds > 1 ? 's' : ''} or until consensus is reached.${stepReview ? ' Rounds will be revealed step-by-step.' : ''}`
                                        : "The panel will provide immediate responses without debate." }) })] }), _jsxs("div", { className: "flex items-center justify-end gap-3 p-6 border-t border-border", children: [_jsx("button", { type: "button", onClick: onClose, className: "px-4 py-2 rounded-lg border border-border text-sm font-medium text-foreground hover:bg-muted transition-colors", children: "Cancel" }), _jsxs("button", { type: "button", onClick: handleConfirm, className: "px-4 py-2 rounded-lg bg-accent text-accent-foreground text-sm font-medium hover:opacity-90 transition-opacity flex items-center gap-2", children: [confirmIcon ?? (_jsx("svg", { viewBox: "0 0 24 24", className: "w-4 h-4", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: _jsx("path", { d: "M4 12a8 8 0 0 1 8-8 8 8 0 0 1 6.18 2.82l2.82-2.82M20 4v6h-6M20 12a8 8 0 0 1-8 8 8 8 0 0 1-6.18-2.82l-2.82 2.82M4 20v-6h6" }) })), confirmLabel] })] })] }) }) }));
}
